# Формат протокола

Типовое сообщение протокола представляет собой строку фиксированной длины. Посылка содержит минимум необходимой информации для идентификации объектамониторинга и события. Длина строки всегда кратна двум и зависит от количества знаков в идентификаторе номера объекта (4х, 6- и 8-ми значные номера).

## Сообщение о событии

Сообщение о событии передается от клиента на сервер. На каждое сообщение о событии клиент должен получать _ответ подтверждения_.

```
5RRL 18AAAAQXXXYYZZZ[DC4]
```

Где:
- `5` - Признак посылки. Константное значение.
- `RR` - Номер приемника (использовалось для оборудования с телефонными линиями).
- `L` - Номер линии (использовалось для оборудования с телефонными линиями).
- ` ` - Пробел, разделяющий обозначения приемника и линии от полезной нагрузки.
- `18` - Тип сообщения. Это 2-значная последовательность, используемая для идентификации сообщения Contact ID на приемник. Всегда имеет значение 18.
- `AAAA` - Номер объекта мониторинга. Длина номера переменная, номер может состоять из 4, 6, 8 цифр. Иногда может передаваться номер объекта в HEX формате (16я система счисления).
- `Q` - Квалификатор события. _1_ (или _E_) - новое событие/тревога, _3_ (или _R_) - восстановление/норма
- `XXX` - Код события (значение от 001 до 999).
- `YY` - Номер раздела/секции (значение от 01 до 99).
- `ZZZ` - Номер зоны/охранного шлейфа или номер пользователя (значение от 000 до 999). 000 используется, чтобы указать, что никакой конкретной информации о зоне или пользователе не применяется.
- `[DC4]` - Терминатор сообщения (байт _0x14_, непечатаемый символ)

Пример посылки: `5012 180021E13002010[DC4]`

Дамп посылки: `353031322031383030323145313330303230313014`

## Сообщение "серцебиения"

Сообщение серцебиенния отправляется на сервер с некоторой переодичностью. На каждое сообщение о серцебиении клиент должен получать _ответ подтверждения_.

```
1RR000sssssssssss@ssss[DC4]
```

Где:
- `1` - Признак посылки. Константное значение.
- `RR` - Номер приемника (использовалось для оборудования с телефонными линиями).
- `000` - Константное значение.
- `s` - Пробел (обозначен буквой для наглядности).
- `000` - Контрольный символ
- `[DC4]` - Терминатор сообщения (байт _0x14_, непечатаемый символ)


Пример посылки: `101000           @    [DC4]`

Дамп посылки: `3130313030302020202020202020202020402020202014`